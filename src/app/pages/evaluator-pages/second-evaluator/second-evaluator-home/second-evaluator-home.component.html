<div class="pc-container">
    <div class="pc-content">
        <div class="row">
            <div class="col-xl-12 col-md-12">
                <div class="row justify-content-center">
                    <div class="col-lg-4 col-md-6 col-10">
                        <div class="card mat-elevation-z8 bg-primary-dark dashnum-card dashnum-card-small text-white overflow-hidden">
                            <span class="round bg-white small"></span>
                            <span class="round bg-white big"></span>
                            <div class="card-body p-3">
                                <div class="d-flex align-items-center">
                                    <div class="avtar avtar-lg">
                                        <i class="text-white fa fa-pie-chart"></i>
                                    </div>
                                    <div class="ms-2">
                                        <h4 class="text-white mb-1">{{ _global_statistique.projet_assignes }} <i
                                                class="fa fa-arrow-up-right-circle opacity-50"></i></h4>
                                        <p class="mb-0 fw-bolder text-dark text-uppercase text-md">Projet imputés</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6 col-10">
                        <div class="card mat-elevation-z8 bg-secondary-dark dashnum-card card-sw-sm dashnum-card-small overflow-hidden">
                            <span class="round bg-warning small"></span>
                            <span class="round bg-warning big"></span>
                            <div class="card-body p-3">
                                <div class="d-flex align-items-center">
                                    <div class="avtar avtar-lg bg-light-warning">
                                        <i class="text-warning fa fa-pie-chart"></i>
                                    </div>
                                    <div class="ms-2">
                                        <h4 class="mb-1 text-white">{{ _global_statistique.projet_traites }} <i class="fa fa-arrow-up-right-circle opacity-50"></i>
                                        </h4>
                                        <p class="mb-0 text-white fw-bolder text-uppercase text-md">Projets traités</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6 col-10">
                        <div class="card mat-elevation-z8 bg-primary-dark dashnum-card dashnum-card-small text-white overflow-hidden">
                            <span class="round bg-white small"></span>
                            <span class="round bg-white big"></span>
                            <div class="card-body p-3">
                                <div class="d-flex align-items-center">
                                    <div class="avtar avtar-lg">
                                        <i class="text-white fa fa-pie-chart"></i>
                                    </div>
                                    <div class="ms-2">
                                        <h4 class="text-white mb-1">{{ _global_statistique.projet_non_traites }}<i
                                                class="fa fa-arrow-up-right-circle opacity-50"></i></h4>
                                        <p class="mb-0 fw-bolder text-dark text-uppercase text-md">Projet non traité</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
        <hr class="mb-3">
        <div class="col-12 mb-3">
            <mat-card>
                <mat-card-content>
                    <div class="container">
                        <div class="text-center">
                            <hr class="my-1">
                            <h3 class="text-center mb-2">
                                <b class="ms-2">
                                    LISTE DES PROJETS SUBVENTIONS
                                </b>
                            </h3>
                            <hr class="my-1">
                        </div>
                    </div>
                    <mat-tab-group>
                        <mat-tab>
                            <ng-template mat-tab-label>
                                <mat-icon class="me-2">list</mat-icon>
                                Projets Entreprises
                            </ng-template>
                            <div class="my-3">
                                <div class="table-responsive">
                                    <table class="table table-hover table-bordered">
                                        <thead>
                                            <tr>
                                                <th class="fst-italic">#ID</th>
                                                <th>TITRE DU PROJET</th>
                                                <th>CODE REF. PROJET</th>
                                                <th>Statut</th>
                                                <th>Date début traitement</th>
                                                <th>Date fin traitement</th>
                                                <th class="text-center">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let projet of _liste_global_commercial_projet | paginate: {id: 'pagination1', itemsPerPage: 20, currentPage: pE }; let i=index">
                                                <td>{{ i+1 }}</td>
                                                <td style="cursor: pointer" [routerLink]="['/web.second-evaluateur.commercial.details-projet', projet.project_code]">
                                                    {{ projet.titre_projet }}
                                                </td>
                                                <td>
                                                    {{ projet.project_code }}
                                                </td>
                                                <td class="text-center">
                                                    <button *ngIf="projet.status_etude == 0 || (projet.status_decisions_off == 0 && projet.status_decisions_on == 0)"
                                                        mat-raised-button [color]="'warn'">
                                                        En cours...
                                                    </button>
                                                    <button *ngIf="projet.status_etude == 1 && (projet.status_decisions_on == 1 || projet.status_decisions_off == 1)"
                                                        mat-raised-button [color]="'primary'">
                                                        Traité
                                                    </button>
                                                </td>
                                                <td class="text-center">
                                                    <b class="me-2"><i class="fa fa-calendar-check text-dark"></i></b>
                                                    <span class="text-dark">{{ projet.date_debut_traitement | date: 'dd MMMM yyyy' }}</span>
                                                </td>
                                                <td class="text-center">
                                                    <b class="me-2"><i class="fa fa-calendar-check text-danger"></i></b>
                                                    <span class="text-dark">{{ projet.date_fin_traitement | date: 'dd MMMM yyyy' }}</span>
                                                </td>
                                                <td class="text-center">
                                                    <button mat-mini-fab color="primary"
                                                        [disabled]="
                                                            projet.status_decrets == null ||
                                                            projet.status_decrets_plan_strategie == null ||
                                                            projet.status_decrets_plan_annuel == null ||
                                                            projet.status_dossiers == 0
                                                        "
                                                        [matMenuTriggerFor]="beforeMenu">
                                                        <mat-icon class="text-white">more_horiz</mat-icon>
                                                    </button>
                                                    <mat-menu #beforeMenu="matMenu" xPosition="before">
                                                        <button mat-menu-item
                                                        [routerLink]="['/web.second-evaluateur.commercial.details-projet', projet.project_code]">
                                                            <mat-icon class="mat-18">visibility</mat-icon> Voir
                                                            contenu</button>
                                                    </mat-menu>
                                                </td>
                                            </tr>
                                            <tr class="" *ngIf="is_loading_data_co == true">
                                                <td colspan="7">
                                                    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
                                                </td>
                                            </tr>
                                            <tr class="" *ngIf="_liste_global_commercial_projet.length == 0 && is_loading_data_co == false">
                                                <td colspan="7">
                                                    <div class="text-center">
                                                        <i class="fa fa-ban text-danger fa-2x"></i>
                                                        <p class="mt-2 text-danger">Aucun élément trouvés</p>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                                <div class="container text-end mt-3">
                                    <pagination-controls id="pagination1" (pageChange)="pE = $event" previousLabel="Précédent" nextLabel="Suivant">
                                    </pagination-controls>
                                </div>
                            </div>
                        </mat-tab>

                        <mat-tab>
                            <ng-template mat-tab-label>
                                <mat-icon class="me-2">list</mat-icon>
                                Projets Organisations
                            </ng-template>
                            <div class="my-3">
                                <div class="table-responsive">
                                    <table class="table table-hover table-bordered">
                                        <thead>
                                            <tr>
                                                <th class="fst-italic">#ID</th>
                                                <th>TITRE DU PROJET</th>
                                                <th>CODE REF. PROJET</th>
                                                <th>Statut</th>
                                                <th>Date début traitement</th>
                                                <th>Date fin traitement</th>
                                                <th class="text-center">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let projet of _liste_global_non_commercial_projet | paginate: {id: 'pagination2', itemsPerPage: 20, currentPage: pO }; let i=index">
                                                <td>{{ i+1 }}</td>
                                                <td style="cursor: pointer" [routerLink]="['/web.second-evaluateur.non-commercial.details-projet', projet.project_code]">{{
                                                    projet.titre_projet }}</td>
                                                <td>{{ projet.project_code }}</td>
                                                <td class="text-center">
                                                    <button *ngIf="projet.status_etude == 0 || (projet.status_decisions_off == 0 && projet.status_decisions_on == 0)"
                                                        mat-raised-button [color]="'warn'">
                                                        En cours...
                                                    </button>
                                                    <button *ngIf="projet.status_etude == 1 && (projet.status_decisions_on == 1 || projet.status_decisions_off == 1)"
                                                        mat-raised-button [color]="'primary'">
                                                        Traité
                                                    </button>
                                                </td>
                                                <td class="text-center">
                                                    <b class="me-2"><i class="fa fa-calendar-check text-dark"></i></b>
                                                    <span class="text-dark">{{ projet.date_debut_traitement | date: 'dd MMMM yyyy' }}</span>
                                                </td>
                                                <td class="text-center">
                                                    <b class="me-2"><i class="fa fa-calendar-check text-danger"></i></b>
                                                    <span class="text-dark">{{ projet.date_fin_traitement | date: 'dd MMMM yyyy' }}</span>
                                                </td>
                                                <td class="text-center">
                                                    <button mat-mini-fab color="primary"
                                                        [disabled]="
                                                            projet.status_decrets == null ||
                                                            projet.status_decrets_plan_strategie == null ||
                                                            projet.status_decrets_plan_annuel == null ||
                                                            projet.status_dossiers == 0
                                                        "
                                                        [matMenuTriggerFor]="beforeMenu">
                                                        <mat-icon class="text-white">more_horiz</mat-icon>
                                                    </button>
                                                    <mat-menu #beforeMenu="matMenu" xPosition="before">
                                                        <button mat-menu-item
                                                        [routerLink]="['/web.second-evaluateur.non-commercial.details-projet', projet.project_code]">
                                                            <mat-icon class="mat-18">visibility</mat-icon> Voir
                                                            contenu</button>
                                                    </mat-menu>
                                                </td>
                                            </tr>
                                            <tr class="" *ngIf="is_loading_data_no_co == true">
                                                <td colspan="7">
                                                    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
                                                </td>
                                            </tr>
                                            <tr class="" *ngIf="_liste_global_non_commercial_projet.length == 0 && is_loading_data_no_co == false">
                                                <td colspan="7">
                                                    <div class="text-center">
                                                        <i class="fa fa-ban text-danger fa-2x"></i>
                                                        <p class="mt-2 text-danger">Aucun élément trouvés</p>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                                <div class="container text-end mt-3">
                                    <pagination-controls id="pagination2" (pageChange)="pO = $event" previousLabel="Précédent" nextLabel="Suivant">
                                    </pagination-controls>
                                </div>
                            </div>
                        </mat-tab>
                    </mat-tab-group>
                </mat-card-content>
            </mat-card>
        </div>

        <div class="col-12 mb-3">
            <mat-card>
                <mat-card-content>
                    <div class="container">
                        <div class="text-center">
                            <hr class="my-1">
                            <h3 class="text-center text-uppercase mb-2">
                                <b class="ms-2">
                                    LISTE DES PROJETS Fonds de garantie
                                </b>
                            </h3>
                            <hr class="my-1">
                        </div>
                    </div>
                    <mat-tab-group>
                        <mat-tab>
                            <ng-template mat-tab-label>
                                <mat-icon class="me-2">list</mat-icon>
                                Projets Entreprises <b> & </b> Organisations
                            </ng-template>
                            <div class="my-3">
                                <div class="table-responsive">
                                    <table class="table table-hover table-bordered">
                                        <thead>
                                            <tr>
                                                <th class="fst-italic">#ID</th>
                                                <th>TITRE DU PROJET</th>
                                                <th>CODE REF. PROJET</th>
                                                <th>Statut</th>
                                                <th>Date début traitement</th>
                                                <th>Date fin traitement</th>
                                                <th class="text-center">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr
                                                *ngFor="let projet of _liste_global_help_projet | paginate: {id: 'pagination3', itemsPerPage: 20, currentPage: pF }; let i=index">
                                                <td>{{ i+1 }}</td>
                                                <td style="cursor: pointer" [routerLink]="['/web.second-evaluateur.help.details-projet', projet.project_code]">
                                                    {{ projet.titre_projet }}
                                                </td>
                                                <td>{{ projet.project_code }}</td>
                                                <td class="text-center">
                                                    <button *ngIf="projet.status_etude == 0 || (projet.status_decisions_off == 0 && projet.status_decisions_on == 0)"
                                                        mat-raised-button [color]="'warn'">
                                                        En cours...
                                                    </button>
                                                    <button *ngIf="projet.status_etude == 1 && (projet.status_decisions_on == 1 || projet.status_decisions_off == 1)"
                                                        mat-raised-button [color]="'primary'">
                                                        Traité
                                                    </button>
                                                </td>
                                                <td class="text-center">
                                                    <b class="me-2"><i class="fa fa-calendar-check text-dark"></i></b>
                                                    <span class="text-dark">{{ projet.date_debut_traitement | date: 'dd MMMM yyyy' }}</span>
                                                </td>
                                                <td class="text-center">
                                                    <b class="me-2"><i class="fa fa-calendar-check text-danger"></i></b>
                                                    <span class="text-dark">{{ projet.date_fin_traitement | date: 'dd MMMM yyyy' }}</span>
                                                </td>
                                                <td class="text-center">
                                                    <button mat-mini-fab color="primary"
                                                        [disabled]="
                                                            projet.status_decrets == null ||
                                                            projet.status_decrets_plan_strategie == null ||
                                                            projet.status_decrets_plan_annuel == null ||
                                                            projet.status_dossiers == 0
                                                        "
                                                        [matMenuTriggerFor]="beforeMenu">
                                                        <mat-icon class="text-white">more_horiz</mat-icon>
                                                    </button>
                                                    <mat-menu #beforeMenu="matMenu" xPosition="before">
                                                        <button mat-menu-item
                                                        [routerLink]="['/web.second-evaluateur.help.details-projet', projet.project_code]">
                                                            <mat-icon class="mat-18">visibility</mat-icon> Voir
                                                            contenu</button>
                                                    </mat-menu>
                                                </td>
                                            </tr>
                                            <tr class="" *ngIf="is_loading_data_help == true">
                                                <td colspan="7">
                                                    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
                                                </td>
                                            </tr>
                                            <tr class="" *ngIf="_liste_global_help_projet.length == 0 && is_loading_data_help == false">
                                                <td colspan="7">
                                                    <div class="text-center">
                                                        <i class="fa fa-ban text-danger fa-2x"></i>
                                                        <p class="mt-2 text-danger">Aucun élément trouvés</p>
                                                    </div>
                                                </td>
                                            </tr>

                                        </tbody>
                                    </table>
                                </div>
                                <div class="container text-end mt-3">
                                    <pagination-controls id="pagination3" (pageChange)="pF = $event" previousLabel="Précédent" nextLabel="Suivant">
                                    </pagination-controls>
                                </div>
                            </div>
                        </mat-tab>
                    </mat-tab-group>
                </mat-card-content>
            </mat-card>
        </div>
    </div>
</div>
